version: 2

models:
  - name: int_trip_metrics
    description: "NYC yellow taxi trips table since 2024, January"
    columns:
      - name: VENDORID
        description: |
          "A code indicating the TPEP provider that provided the record."
          1 = Creative Mobile Technologies, LLC
          2 = Curb Mobility, LLC
          6 = Myle Technologies Inc
          7 = Helix
      - name: TPEP_PICKUP_DATETIME
        description: "The date and time when the meter was engaged."
      - name: TPEP_DROPOFF_DATETIME
        description: "The date and time when the meter was disengaged."
      - name: TEMPORAL_PERIOD
        description: |
          The category of pickup datetime
          morning rush : between 6 and 10 am
          day : between 10 am and 4 pm
          evening rush : between 4 and 8 pm
          evening : between 8 pm and midnight
          night : between midnight and 6 am
      - name: DAY_TYPE
        description: |
          working day : Monday to Friday
          weekend : Saturday or Sunday
      - name: DURATION
        description: "The trip duration in minutes (TPEP_DROPOFF_DATETIME - TPEP_PICKUP_DATETIME)"
        tests: 
          - dbt_utils.expression_is_true:
              expression: "> 0"
      - name: PASSENGER_COUNT
        description: "The number of passengers in the vehicle."
      - name: TRIP_DISTANCE
        description: "The elapsed trip distance in miles reported by the taximeter."
      - name: DISTANCE_CATEGORY
        description: |
          The category of trip distance
          short: < 1 mile
          medium: between 1 and 5 miles
          long: between 5 and 10 miles
          very long: more than 10 miles
      - name: RATECODEID
        description: |
          The final rate code in effect at the end of the trip.
          1 = Standard rate
          2 = JFK
          3 = Newark
          4 = Nassau or Westchester
          5 = Negotiated fare
          6 = Group ride
          99 = Null/unknown        
      - name: STORE_AND_FWD_FLAG
        description: |
          This flag indicates whether the trip record was held in vehicle memory before
          sending to the vendor, aka 'store and forward,' because the vehicle did not
          have a connection to the server.
          Y = store and forward trip
          N = not a store and forward trip
      - name: PULOCATIONID
        description: "TLC Taxi Zone in which the taximeter was engaged"
      - name: DOLOCATIONID
        description: "TLC Taxi Zone in which the taximeter was disengaged"
      - name: PAYMENT_TYPE
        description: |
          A numeric code signifying how the passenger paid for the trip.
          0 = Flex Fare trip
          1 = Credit card
          2 = Cash
          3 = No charge
          4 = Dispute
          5 = Unknown
          6 = Voided trip
      - name: FARE_AMOUNT
        description: "The time-and-distance fare calculated by the meter."
      - name: EXTRA
        description: "Miscellaneous extras and surcharges." 
      - name: MTA_TAX
        description: "Tax that is automatically triggered based on the metered rate in use."
      - name: TIP_AMOUNT
        description: "Tip amount â€“ This field is automatically populated for credit card tips. Cash
          tips are not included."
      - name: TIP_PART
        description: | 
          "The percentage of tip compared to base amount with taxes"
          ratio tip / amount without tip
      - name: TOLLS_AMOUNT
        description: "Total amount of all tolls paid in trip."
      - name: IMPROVEMENT_SURCHARGE
        description: "Improvement surcharge assessed trips at the flag drop. The improvement
          surcharge began being levied in 2015"
      - name: TOTAL_AMOUNT
        description: "The total amount charged to passengers. Does not include cash tips"
      - name: CONGESTION_SURCHARGE
        description: "Total amount collected in trip for NYS congestion surcharge."
      - name: AIRPORT_FEE
        description: "For pick up only at LaGuardia and John F. Kennedy Airports."
      - name: CBD_CONGESTION_FEE
        description: "Per-trip charge for MTA's Congestion Relief Zone starting Jan. 5, 2025."
      - name: AVERAGE_SPEED
        description: "The average speed in miles per hour"
   

